(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t,a){e.exports=a(62)},38:function(e,t,a){},39:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),l=a.n(s),c=(a(38),a(4)),o=a(8),i=(a(39),a(31)),u=a(1),m=Object(n.createContext)(),d=a(11),p=function(e,t){switch(t.type){case"SET_IS_AUTHENTICATED":return Object(d.a)({},e,{isAuthenticated:t.payload});case"LOGIN":return Object(d.a)({},e,{user:t.payload});case"SET_ERROR_MESSAGE":return Object(d.a)({},e,{error:t.payload});case"ADD_EXPENSE":case"SET_USER_EXPENSES":return Object(d.a)({},e,{expenses:t.payload});default:return Object(d.a)({},e)}},E=a(9),f=a.n(E),g=function(e){var t=Object(n.useReducer)(p,{isAuthenticated:!1,isTransactionSuccessful:!1,sessionID:null,user:{},error:{isError:!1,message:""},expenses:[]}),a=Object(u.a)(t,2),s=a[0],l=a[1],c=function(e){l({type:"SET_IS_AUTHENTICATED",payload:e})},o=function(e){l({type:"LOGIN",payload:e})},d=function(e){l({type:"SET_USER_EXPENSES",payload:e})},E=function(e){l({type:"SET_ERROR_MESSAGE",payload:{isError:e.status,message:e.message}})};return r.a.createElement(m.Provider,{value:{isAuthenticated:s.isAuthenticated,authenticate:function(e){f.a.post("/api/login",{email:e.email,password:e.password}).then((function(e){s.error.isError||E({status:!1,message:""}),c(!0),o({id:e.data.user.id,firstName:e.data.user.fname,password:e.data.user.lname,email:e.data.user.email,registered_date:e.data.user.registered_date,sessionID:e.data.session_id}),d(e.data.expenses),window.localStorage.setItem("session_id",e.data.session_id)})).catch((function(e){E({status:!0,message:e.response.data.error})}))},error:s.error,logout:function(){f.a.post("/api/logout",{uid:s.user.id}).then((function(e){c(!1),o({}),window.localStorage.clear()})).catch((function(e){console.log(e)}))},addExpense:function(e){console.log("ADD EXPENSE: ",e),f.a.post("/api/expense",e).then((function(e){l({type:"ADD_EXPENSE",payload:[].concat(Object(i.a)(s.expenses),[{id:e.data.id,date:e.data.date,payee:e.data.payee,description:e.data.description,amount:e.data.amount}])})})).catch((function(e){console.log("Error: ",e),console.log("DATA ",e.response.data),console.log("STATUS",e.response.status),console.log("HEADERS",e.response.headers),E({status:!0,message:e.response.data.error})}))},expenses:s.expenses,user:s.user,editExpense:function(e){var t="/api/expense/"+e.id;f.a.put(t,e).then((function(e){d(e.data.expenses)}))},deleteUserExpense:function(e){var t="/api/expense/"+e;f.a.delete(t,{params:{user_id:s.user.id}}).then((function(e){d(e.data.expenses)}))}}},e.children)},h=function(){var e=Object(n.useContext)(m);return e.isAuthenticated?r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"main-nav"},r.a.createElement(c.b,{to:"/"},"Expense Tracker")),r.a.createElement("nav",{className:"user-controls"},r.a.createElement(c.b,{to:"/home"},"Home"),r.a.createElement(c.b,{to:"/account"},"Account"),r.a.createElement("button",{type:"button",onClick:function(){e.logout()}},"Logout"))):r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"main-nav"},r.a.createElement(c.b,{to:"/"},"Expense Tracker")),r.a.createElement("nav",{className:"user-controls"},r.a.createElement(c.b,{to:"/register"},"Register")))};var b=function(){var e=Object(n.useContext)(m),t=Object(n.useState)(),a=Object(u.a)(t,2),s=a[0],l=a[1],o=Object(n.useState)(),i=Object(u.a)(o,2),d=i[0],p=i[1];return r.a.createElement("div",{className:"app-login"},r.a.createElement("h3",null,"Login"),e.error.isError?r.a.createElement("span",{className:"error"}," ",e.error.message," "):"",r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log("The email entered is: ",s.toLowerCase()),console.log("The password entered is: ",d),e.authenticate({email:s,password:d})},className:e.error.isError?"login-form-error":"login-form"},r.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:"Email",onChange:function(e){l(e.target.value)},required:!0}),r.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){p(e.target.value)},required:!0}),r.a.createElement("button",{type:"submit"},"Login")),r.a.createElement("h3",null,r.a.createElement(c.b,{to:"/register"},"Register Now!")))},y=function(){return Object(n.useContext)(m).isAuthenticated?r.a.createElement(o.a,{to:"/home"}):r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"app-info"},r.a.createElement("h3",null,"Welcome to Expense Tracker"),r.a.createElement("p",{className:"support-text"},"Conveniently add daily expenses and help you keep track of your finances."),r.a.createElement("q",{className:"quote"},"Beware of little expenses. A small leak will sink a great ship.")," -Ben Franklin",r.a.createElement("p",{className:"support-text"},"Join the community and signup!")),r.a.createElement(b,null))},v=a(9),O=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],s=t[1],l=Object(n.useState)(),c=Object(u.a)(l,2),i=c[0],m=c[1],d=Object(n.useState)(),p=Object(u.a)(d,2),E=p[0],f=p[1],g=Object(n.useState)(),h=Object(u.a)(g,2),b=h[0],y=h[1],O=Object(n.useState)(),N=Object(u.a)(O,2),S=N[0],j=N[1],x=Object(n.useState)(!1),w=Object(u.a)(x,2),A=w[0],T=w[1];if(A)return r.a.createElement(o.a,{to:"/"});return r.a.createElement("div",{className:"register-page"},r.a.createElement("div",{className:"app-login"},r.a.createElement("h3",null,"Register"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("The First Name entered is: ",a),console.log("The Last Name entered is: ",i),console.log("The Email entered is: ",E),console.log("The Password entered is: ",b),console.log("The Password2 entered is: ",S),v.post("/api/register",{firstName:a,lastName:i,email:E,password:b}).then((function(e){201===e.status&&T(!0)})).catch((function(e){console.log(e)}))},className:"login-form"},r.a.createElement("input",{type:"text",name:"firstName",id:"firstName",placeholder:"First Name",onChange:function(e){s(e.target.value)}}),r.a.createElement("input",{type:"text",name:"lastName",id:"lastName",placeholder:"Last Name",onChange:function(e){m(e.target.value)}}),r.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:"Email",onChange:function(e){f(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"Password",onChange:function(e){y(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password2",id:"password2",placeholder:"Re-enter Password",onChange:function(e){j(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Register"))))},N=function(){var e=Object(n.useContext)(m),t=Object(n.useState)(),a=Object(u.a)(t,2),s=a[0],l=a[1],c=Object(n.useState)(),o=Object(u.a)(c,2),i=o[0],d=o[1],p=Object(n.useState)(),E=Object(u.a)(p,2),f=E[0],g=E[1],h=Object(n.useState)(),b=Object(u.a)(h,2),y=b[0],v=b[1],O=Object(n.useState)(),N=Object(u.a)(O,2),S=N[0],j=N[1],x=Object(n.useState)(),w=Object(u.a)(x,2),A=w[0],T=w[1],C=Object(n.useRef)(null),_=function(){C.current.elements.namedItem("date").value="",C.current.elements.namedItem("payee").value="",C.current.elements.namedItem("description").value="",C.current.elements.namedItem("amount").value="",T(""),l(""),d(""),g(""),v("")};return r.a.createElement(n.Fragment,null,r.a.createElement("section",{className:"expense-input"},r.a.createElement("form",{className:"expense-input_form",onSubmit:function(t){t.preventDefault(),""!==s&&""!==i&&""!==f&&""!==y||alert("Please make an entry to continue."),!0===S?(e.editExpense({id:A,date:s,payee:i,description:f,amount:y}),j(!1)):e.addExpense({user_id:e.user.id,date:s,payee:i,description:f,amount:y}),_()},ref:C},r.a.createElement("input",{type:"date",name:"date",id:"date",placeholder:"Date",onChange:function(e){l(e.target.value)}}),r.a.createElement("input",{type:"text",name:"payee",id:"payee",placeholder:"Payee",onChange:function(e){d(e.target.value)}}),r.a.createElement("input",{type:"text",name:"description",id:"description",placeholder:"Description",onChange:function(e){g(e.target.value)}}),r.a.createElement("input",{type:"text",name:"amount",id:"amount",placeholder:"Amount Spent",onChange:function(e){v(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Add New Expense"))),r.a.createElement("section",{className:"expense-data"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Payee"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,e.expenses.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.payee),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.amount),r.a.createElement("td",{className:"actions"},r.a.createElement("button",{type:"button",onClick:function(){return function(t){j(!0);var a=e.expenses.find((function(e){return e.id===t}));T(a.id),l(a.date),C.current.elements.namedItem("date").value=a.date,d(a.payee),C.current.elements.namedItem("payee").value=a.payee,g(a.description),C.current.elements.namedItem("description").value=a.description,v(a.amount),C.current.elements.namedItem("amount").value=a.amount}(t.id)}},r.a.createElement("i",{className:"fa fa-edit",title:"Edit"})),r.a.createElement("button",{type:"button",onClick:function(){return e.deleteUserExpense(t.id)}},r.a.createElement("i",{className:"fa fa-trash",title:"Delete"}))))}))))))},S=function(e){e.user;return r.a.createElement(N,null)},j=function(){return r.a.createElement("div",null,"Account Page")},x=a(32),w=function(e){var t=e.component,a=Object(x.a)(e,["component"]),s=Object(n.useContext)(m);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){return s.isAuthenticated?r.a.createElement(t,e):r.a.createElement(o.a,{to:{pathname:"/",state:{from:e.location}}})}}))};var A=function(){return r.a.createElement(g,null,r.a.createElement("div",{className:"App"},r.a.createElement(c.a,null,r.a.createElement("header",{className:"main-header"},r.a.createElement(h,null)),r.a.createElement("div",{className:"container"},r.a.createElement(o.d,null,r.a.createElement(w,{exact:!0,path:"/account",component:j}),r.a.createElement(w,{exact:!0,path:"/home",component:S}),r.a.createElement(o.b,{path:"/register"},r.a.createElement(O,null)),r.a.createElement(o.b,{path:"/"},r.a.createElement(y,null)))))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.bb46122c.chunk.js.map